# Data Shaping using Reshape(2) and Stats Packages

## Introduction

Research data sets can be overwrought with information that may not be of interest to the researcher; on one hand it could be that the researcher is using data sets from experiments or studies that were not conducted directly by them and therefore needs to carefully choose variables, or perhaps there were too many variables collected during the study and a particular analysis only requires a select few. It is also possible that the analysis software is only able to process the data if it is fed into the input in a certain manner. Whatever the limitations are, data shaping is a key step in data analysis and there are many tools available to assist with this task. R programmers have acknowledged the need for CRAN approved packages that aid with this endeavor and since 2003 have created packages such as Reshape to help others. This section will focus on the functionalities of the Reshape2 package distributed in 2017 by Hadley Wickham and the Stats 2001 by the R Core Team.

## Different Data Inputs

Data input formats, for the purposes of this exercise, exist mainly in 2 forms: _wide format_ or _long format_. It is important to understand what format the data is in prior to re-shaping or performing an analysis. This will allow you to correctly reshape the data prior to analysis or input into the software correctly. The next subsections describe the differences between the 2 formats and provide a visual example of the formats. 

### Long Format

Data is described to be in **long format** when each row represents 1 time point or variable. For example, if an experiment collected information on state population, state mortality, and state income then the output would be the state (e.g. California) and the variable (e.g. Income) in the first row, the state (e.g. California) and and the variable (e.g. Mortality) in the next row, and so forth until a full data output is created. 


```{r, message=FALSE}
#install.packages("reshape2")
#install.packages("dplyr")
library(reshape2)
library(dplyr)

SubjectID<-1:50
df<- data.frame(SubjectID,state.x77)
example<-melt(df,id="SubjectID")
ex<-example%>%filter(SubjectID==1)
ex

```


This example demonstrates that all of the rows, which measure a distinct variable with its corresponding value, belong to 1 subject (i.e. 1). This format is useful for analysis of repeated measures experiments in which the same subject may be asked about different benchmarks during the course of the experiment. 



### Wide Format

Data is described to be in **wide format** when each row represents all of the individual variable responses for 1 subjected, separated by column. For example, if an experiment collected information on subjected responses at different intervals then the output would be the subject (e.g. 1) and the responses at each interval in separate columns (e.g. inter1, inter2, inter3, etc.) in the first row, the next subject (e.g. 2) and the responses at each interval in separate columns (e.g. inter1, inter2, etc.) in the next row and so fhorth until a full data output is created. 

```{r}

wide <- reshape(Indometh, v.names = "conc", idvar = "Subject",
                timevar = "time", direction = "wide")
wide[,1:8]

```

This example demonstrates that all of the rows show a distinct subject with the distinct variable measures in each individual column. 

## Reshape2 Package Functions

The Reshape2 package contains various functions that helps users place their data into either the _long format_ or the _wide format_ depending on what is needed by the software being used for analysis. Though there are many functions availalble and it is encouraged that all functions are reviewed (you can do so here: <https://cran.r-project.org/web/packages/reshape2/reshape2.pdf>), the primary focus of this section will be on the use of the **melt()** and **cast()** functions.


### melt()



### cast()

## Stats Package Functions

The Stats package contains various functions that helps users place their data into either the _long format_ or the _wide format_ depending on what is needed by the software being used for analysis. Though there are many functions availalble and it is encouraged that all functions are reviewed (you can do so here: <https://www.rdocumentation.org/packages/stats/versions/3.6.0>), the primary focus of this section will be on the use of the **reshape()** function. 

### Reshape()

## Examples of Data Shaping

### Reshape2 

#### Data into Wide Format

#### Data into Long Format

### Stats

#### Data into Wide Format

#### Data into Long Format




